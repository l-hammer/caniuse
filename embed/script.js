function getShortenedBrowserVersion(e){return e&&e.indexOf("-")>-1&&(e=e.split("-")[1]),e}function loadJSON(e,t,s){var r=new XMLHttpRequest;r.onreadystatechange=function(){r.readyState===XMLHttpRequest.DONE&&(200===r.status?t&&t(JSON.parse(r.responseText)):s&&s(r))},r.open("GET",e,!0),r.send()}var caniuseDataUrl="https://raw.githubusercontent.com/Fyrd/caniuse/master/fulldata-json/data-2.0.json",featureID=location.href.split("?feat=")[1],featureID=featureID?featureID.split("&periods=")[0]:null,periods=location.href.split("&periods=")[1],periods=periods?periods.split("&accessible-colours=")[0]:null,periods=periods?periods.split(","):null,accessibleColours=location.href.split("&accessible-colours=")[1],accessibleColours=accessibleColours||!1,browsers=["ie","edge","firefox","chrome","safari","ios_saf","op_mini","and_chr","android","samsung"];document.getElementById("defaultMessage").innerHTML=featureID&&periods?'<a href="http://caniuse.com/#feat='+featureID+'">Can I Use '+featureID+"?</a> Data on support for the "+featureID+" feature across the major browsers from caniuse.com. (Embed Loading)":"Error: Feature and/or Periods not Specified";for(var i=periods.length-1;i>-1;i--){for(var tableCells="",j=0;j<browsers.length;j++)tableCells+='<td class="'+browsers[j]+'"></td>';var row=document.createElement("tr");row.className="statistics "+periods[i],row.innerHTML=tableCells,document.getElementById("tableBody").appendChild(row)}loadJSON(caniuseDataUrl,function(e){var t=e.data[featureID];if(t){var s=t.usage_perc_y,r=t.usage_perc_a,a=s+r,a=a.toFixed(2);document.getElementById("featureTitle").innerHTML=t.title,document.getElementById("featureLink").href="http://caniuse.com/#feat="+featureID,document.getElementById("note").innerHTML='Global: <span class="y">'+s+'%</span> + <span class="a">'+r+"%</span> = "+a+"%";for(var o={},i=0;i<browsers.length;i++){for(var l,d=browsers[i],u=e.agents[d].current_version,c=0;c<e.agents[d].version_list.length;c++)if(0===e.agents[d].version_list[c].era){l=c;break}l=parseInt(l),o[d]={};for(var c=0;c<periods.length;c++){var f=periods[c];"current"===f?o[d][f]=u:f.indexOf("past")>-1?(n=parseInt(f.split("_")[1]),o[d][f]=e.agents[d].version_list[l-n]?e.agents[d].version_list[l-n].version:null):f.indexOf("future")>-1&&(n=parseInt(f.split("_")[1]),o[d][f]=e.agents[d].version_list[l+n]?e.agents[d].version_list[l+n].version:null)}}for(var p={},i=0;i<browsers.length;i++){var d=browsers[i];p[d]={};for(var c=0;c<periods.length;c++){var f=periods[c],g=o[d][f],m=e.agents[d].usage_global[g],m=m?m.toFixed(2):0;p[d][f]=m}}for(var h={},i=0;i<browsers.length;i++){var d=browsers[i];h[d]={};for(var c=0;c<periods.length;c++){var f=periods[c];h[d][f]=t.stats[d][o[d][f]]}}for(var v=!1,b=!1,y=!1,i=0;i<browsers.length;i++)for(var d=browsers[i],c=0;c<periods.length;c++){for(var w,f=periods[c],I=document.getElementsByClassName(f)[0],E=I.childNodes,_=0;_<E.length;_++)E[_].className.indexOf(d)>-1&&(w=E[_]);void 0!=h[d][f]&&(w.className+=" "+h[d][f]);var L=getShortenedBrowserVersion(o[d][f]),M="<span>"+L+'</span><span class="usage">'+p[d][f]+"%</span>";void 0!=o[d][f]?w.innerHTML=M:w.innerHTML="<span></span>",void 0!=h[d][f]&&h[d][f].indexOf("x")>-1&&(v=!0),void 0!=h[d][f]&&h[d][f].indexOf("u")>-1&&(b=!0),void 0!=h[d][f]&&h[d][f].indexOf("d")>-1&&(y=!0)}document.getElementById("legendX").style.display=v?"inline-block":"none",document.getElementById("legendU").style.display=b?"inline-block":"none",document.getElementById("legendD").style.display=y?"inline-block":"none"}else document.getElementById("featureTitle").innerHTML="Uh Oh!",document.getElementById("featureMain").innerHTML="";document.getElementById("defaultMessage").style.display="none",document.getElementsByClassName("feature")[0].style.display="block";var B=document.getElementsByClassName("feature")[0].scrollHeight,D="ciu_embed:"+featureID+":"+B;parent.postMessage(D,"*"),window.onresize=function(e){B=document.getElementsByClassName("feature")[0].scrollHeight;var t="ciu_embed:"+featureID+":"+B;parent.postMessage(t,"*")}},function(e){document.getElementById("defaultMessage").innerHTML="Error Getting JSON File: "+e.response,console.error(e)}),"true"==accessibleColours&&document.body.classList.add("accessible-colours");